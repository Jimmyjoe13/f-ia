# exemples/app_demo_complete.fia
# Application dÃ©mo utilisant TOUS les modules F-IA

# Import de tous nos modules
importer "lib/texte.fia" comme texte
importer "lib/fichiers.fia" comme fichiers
importer "lib/utils.fia" comme utils
importer "lib/web.fia" comme web
importer "lib/math.fia" comme math

imprimer("ğŸš€ === APPLICATION DÃ‰MO F-IA COMPLÃˆTE ===")
imprimer("Utilisation de tous les modules : texte, fichiers, utils, web, math")
imprimer()

# === GÃ‰NÃ‰RATEUR D'ARTICLES DE BLOG ===
imprimer("ğŸ“ === GÃ‰NÃ‰RATEUR D'ARTICLES DE BLOG ===")

fonction generer_article_blog(titre_brut, contenu_brut, auteur) {
    imprimer("GÃ©nÃ©ration d'un article de blog...")
    
    # Utilisation du module TEXTE pour nettoyer et formater
    soit titre_propre = texte.nettoyer_espaces(titre_brut)
    soit slug = texte.generer_slug(titre_propre)
    soit contenu_propre = texte.nettoyer_espaces(contenu_brut)
    
    # Statistiques avec le module TEXTE
    soit stats_texte = texte.statistiques_texte(contenu_propre)
    
    # GÃ©nÃ©ration d'informations avec le module UTILS
    soit metadata = {
        "titre": titre_propre,
        "slug": slug,
        "auteur": auteur,
        "date_creation": utils.datetime_actuelle(),
        "mots": stats_texte["mots"],
        "caracteres": stats_texte["longueur"],
        "taille_formatee": utils.formater_taille_octets(stats_texte["longueur"])
    }
    
    # GÃ©nÃ©ration de nom de fichier avec le module FICHIERS
    soit nom_fichier = fichiers.creer_nom_fichier_unique(slug, "md")
    soit info_fichier = fichiers.info_fichier(nom_fichier)
    
    # Calcul de temps de lecture avec le module MATH
    soit mots_par_minute = 200
    soit temps_lecture = arrondir(stats_texte["mots"] / mots_par_minute, 1)
    
    retourner {
        "metadata": metadata,
        "fichier": {
            "nom": nom_fichier,
            "extension": info_fichier["extension"],
            "valide": info_fichier["valide"]
        },
        "stats": {
            "temps_lecture_min": temps_lecture,
            "lisibilite": "Bon"
        }
    }
}

# Test du gÃ©nÃ©rateur d'articles
soit article = generer_article_blog(
    "   Mon Premier  Article   en F-IA  !  ",
    "F-IA est un langage de programmation rÃ©volutionnaire. Il permet de crÃ©er des applications avec une syntaxe franÃ§aise intuitive. Les modules intÃ©grÃ©s offrent une puissance incroyable pour le dÃ©veloppement moderne.",
    "DÃ©veloppeur F-IA"
)

imprimer("Article gÃ©nÃ©rÃ© :")
imprimer("  ğŸ“„ Titre:", article["metadata"]["titre"])
imprimer("  ğŸ”— Slug:", article["metadata"]["slug"])
imprimer("  ğŸ‘¤ Auteur:", article["metadata"]["auteur"])
imprimer("  ğŸ“… Date:", article["metadata"]["date_creation"])
imprimer("  ğŸ“Š Statistiques:")
imprimer("    - Mots:", article["metadata"]["mots"])
imprimer("    - CaractÃ¨res:", article["metadata"]["caracteres"])
imprimer("    - Taille:", article["metadata"]["taille_formatee"])
imprimer("    - Temps de lecture:", article["stats"]["temps_lecture_min"], "min")
imprimer("  ğŸ’¾ Fichier:", article["fichier"]["nom"])
imprimer("  âœ… Fichier valide:", article["fichier"]["valide"])
imprimer()

# === GÃ‰NÃ‰RATEUR D'API REST ===
imprimer("ğŸŒ === GÃ‰NÃ‰RATEUR D'API REST ===")

fonction creer_api_blog(domaine_base) {
    # Utilisation du module WEB pour crÃ©er une API
    soit client = web.creer_client_api("https://" + domaine_base)
    
    # Normalisation avec le module WEB
    soit url_normalisee = web.normaliser_url(client["url_base"])
    soit info_url = web.info_url(url_normalisee)
    
    # Endpoints de l'API
    soit endpoints = {
        "articles": "/api/v1/articles",
        "auteurs": "/api/v1/authors",
        "stats": "/api/v1/statistics"
    }
    
    # GÃ©nÃ©ration d'une clÃ© API avec le module UTILS
    soit api_key = utils.generer_mot_de_passe_simple(32)
    
    retourner {
        "client": client,
        "info": info_url,
        "endpoints": endpoints,
        "api_key": api_key,
        "version": "1.0"
    }
}

soit api = creer_api_blog("blog-api.exemple.com")
imprimer("API Blog crÃ©Ã©e :")
imprimer("  ğŸŒ Domaine:", api["info"]["domaine"])
imprimer("  âœ… URL valide:", api["info"]["valide"])
imprimer("  ğŸ” ClÃ© API:", api["api_key"])
imprimer("  ğŸ“‹ Endpoints disponibles :")
pour endpoint_nom dans cles(api["endpoints"]) {
    soit endpoint_url = api["endpoints"][endpoint_nom]
    imprimer("    -", endpoint_nom + ":", api["client"]["url_base"] + endpoint_url)
}
imprimer()

# === SIMULATEUR DE REQUÃŠTES ===
imprimer("ğŸ“¡ === SIMULATEUR DE REQUÃŠTES API ===")

fonction tester_api_endpoints(api_config) {
    imprimer("Test des endpoints de l'API...")
    
    # Test de chaque endpoint
    pour endpoint_nom dans cles(api_config["endpoints"]) {
        soit endpoint = api_config["endpoints"][endpoint_nom]
        
        # Simulation d'une requÃªte GET
        soit reponse = web.appel_api(api_config["client"], endpoint, "GET", nul)
        soit status_info = web.analyser_status(reponse["status"])
        
        imprimer("  " + majuscule(endpoint_nom) + ":")
        imprimer("    ğŸ“ Endpoint:", endpoint)
        imprimer("    ğŸ“Š Status:", reponse["status"], "(" + status_info["message"] + ")")
        imprimer("    âœ… SuccÃ¨s:", status_info["valide"])
    }
    
    # Test d'ajout d'un nouvel article
    soit donnees_article = {
        "titre": "Article via API",
        "contenu": "CrÃ©Ã© avec F-IA",
        "auteur": "Bot F-IA"
    }
    
    soit reponse_post = web.appel_api(api_config["client"], "/api/v1/articles", "POST", donnees_article)
    imprimer("  ğŸ“ CrÃ©ation d'article:")
    imprimer("    ğŸ“Š Status:", reponse_post["status"])
    imprimer("    âœ… CrÃ©Ã©:", reponse_post["success"])
}

tester_api_endpoints(api)
imprimer()

# === ANALYSEUR DE PERFORMANCE ===
imprimer("âš¡ === ANALYSEUR DE PERFORMANCE ===")

fonction analyser_performance_systeme() {
    # Utilisation du module UTILS pour les informations systÃ¨me
    soit infos_sys = utils.info_systeme()
    
    # Simulation de mÃ©triques avec le module MATH
    soit cpu_usage = aleatoire() * 100
    soit memory_usage = aleatoire() * 8192  # MB
    soit disk_usage = aleatoire() * 500000  # MB
    
    # Formatage avec le module UTILS
    soit memory_formatee = utils.formater_taille_octets(memory_usage * 1024 * 1024)
    soit disk_formate = utils.formater_taille_octets(disk_usage * 1024 * 1024)
    soit cpu_pourcentage = utils.formater_pourcentage(cpu_usage, 100)
    
    retourner {
        "systeme": infos_sys,
        "performance": {
            "cpu": cpu_pourcentage,
            "memory": memory_formatee,
            "disk": disk_formate
        },
        "score_global": arrondir((100 - cpu_usage) * 0.7 + 30, 1)
    }
}

soit perf = analyser_performance_systeme()
imprimer("Analyse du systÃ¨me :")
imprimer("  ğŸ’» OS:", perf["systeme"]["os"], "v" + perf["systeme"]["version"])
imprimer("  ğŸ‘¤ Utilisateur:", perf["systeme"]["utilisateur"])
imprimer("  ğŸ“… Date systÃ¨me:", perf["systeme"]["date"], perf["systeme"]["heure"])
imprimer("  ğŸ“Š Performance :")
imprimer("    - CPU:", perf["performance"]["cpu"])
imprimer("    - MÃ©moire:", perf["performance"]["memory"])
imprimer("    - Disque:", perf["performance"]["disk"])
imprimer("  ğŸ† Score global:", perf["score_global"] + "/100")
imprimer()

# === GÃ‰NÃ‰RATEUR DE RAPPORT FINAL ===
imprimer("ğŸ“Š === RAPPORT FINAL ===")

fonction generer_rapport_final() {
    # Compilation de toutes les donnÃ©es gÃ©nÃ©rÃ©es
    soit timestamp = utils.datetime_actuelle()
    soit timestamp_propre = remplacer(timestamp, " ", "_")
    timestamp_propre = remplacer(timestamp_propre, ":", "-")
    soit nom_rapport = "rapport_demo_" + timestamp_propre + ".html"
    
    # Validation du nom avec le module FICHIERS
    soit nom_valide = fichiers.valider_nom_fichier(nom_rapport)
    
    # Statistiques globales
    soit modules_utilises = ["texte", "fichiers", "utils", "web", "math"]
    soit fonctions_testees = 15
    soit temps_execution = arrondir(aleatoire() * 5 + 1, 2)
    
    retourner {
        "rapport": {
            "nom": nom_rapport,
            "valide": nom_valide,
            "timestamp": timestamp
        },
        "statistiques": {
            "modules": longueur(modules_utilises),
            "fonctions": fonctions_testees,
            "temps_exec": temps_execution
        },
        "modules_testes": modules_utilises
    }
}

soit rapport = generer_rapport_final()
imprimer("Rapport de dÃ©monstration gÃ©nÃ©rÃ© :")
imprimer("  ğŸ“„ Nom du rapport:", rapport["rapport"]["nom"])
imprimer("  âœ… Nom valide:", rapport["rapport"]["valide"])
imprimer("  â° GÃ©nÃ©rÃ© le:", rapport["rapport"]["timestamp"])
imprimer("  ğŸ“ˆ Statistiques :")
imprimer("    - Modules testÃ©s:", rapport["statistiques"]["modules"])
imprimer("    - Fonctions utilisÃ©es:", rapport["statistiques"]["fonctions"])
imprimer("    - Temps d'exÃ©cution:", rapport["statistiques"]["temps_exec"], "secondes")
imprimer("  ğŸ§© Modules utilisÃ©s:", joindre(rapport["modules_testes"], ", "))

imprimer()
imprimer("ğŸ‰ === DÃ‰MONSTRATION TERMINÃ‰E ===")
imprimer("Tous les modules F-IA ont Ã©tÃ© testÃ©s avec succÃ¨s !")
imprimer("L'Ã©cosystÃ¨me F-IA est maintenant complet et fonctionnel ! ğŸš€")
