# test_ml_basic.fia - Test basique du nouveau module ML
importer "lib/ml.fia" comme ml

imprimer("ğŸ¤– === TEST MODULE MACHINE LEARNING F-IA ===")
imprimer()

# Test 1: CrÃ©ation de modÃ¨les
imprimer("ğŸ“Š Test 1: CrÃ©ation des modÃ¨les ML")
soit rf_model = ml.RandomForestClassifier(50, 10)
imprimer("âœ… Random Forest crÃ©Ã©:", rf_model)

soit svm_model = ml.SVM("linear", 1.0)
imprimer("âœ… SVM crÃ©Ã©:", svm_model)

soit knn_model = ml.KNNClassifier(3)
imprimer("âœ… KNN crÃ©Ã©:", knn_model)

soit lr_model = ml.LinearRegression()
imprimer("âœ… RÃ©gression linÃ©aire crÃ©Ã©e:", lr_model)

imprimer()

# Test 2: DonnÃ©es synthÃ©tiques simples
imprimer("ğŸ“ˆ Test 2: CrÃ©ation de donnÃ©es synthÃ©tiques")
soit X_train = [
    [1.0, 2.0], [2.0, 3.0], [3.0, 1.0], [4.0, 5.0],
    [5.0, 4.0], [6.0, 2.0], [7.0, 8.0], [8.0, 6.0]
]
soit y_train = [0, 0, 0, 1, 1, 0, 1, 1]

imprimer("DonnÃ©es d'entraÃ®nement X:", longueur(X_train), "Ã©chantillons")
imprimer("Ã‰tiquettes y:", longueur(y_train), "classes")
imprimer()

# Test 3: EntraÃ®nement
imprimer("ğŸ¯ Test 3: EntraÃ®nement des modÃ¨les")
soit resultat_rf = ml.entrainer(rf_model, X_train, y_train)
imprimer("Random Forest:", resultat_rf)

soit resultat_svm = ml.entrainer(svm_model, X_train, y_train)
imprimer("SVM:", resultat_svm)

soit resultat_knn = ml.entrainer(knn_model, X_train, y_train)
imprimer("KNN:", resultat_knn)
imprimer()

# Test 4: PrÃ©dictions
imprimer("ğŸ”® Test 4: PrÃ©dictions")
soit X_test = [[2.5, 2.5], [6.5, 7.0], [1.5, 1.0]]

soit pred_rf = ml.predire(rf_model, X_test)
imprimer("PrÃ©dictions Random Forest:", pred_rf)

soit pred_svm = ml.predire(svm_model, X_test)
imprimer("PrÃ©dictions SVM:", pred_svm)

soit pred_knn = ml.predire(knn_model, X_test)
imprimer("PrÃ©dictions KNN:", pred_knn)
imprimer()

# Test 5: Ã‰valuation
imprimer("ğŸ“Š Test 5: Ã‰valuation des modÃ¨les")
soit score_rf = ml.evaluer_modele(rf_model, X_train, y_train, "accuracy")
imprimer("PrÃ©cision Random Forest:", arrondir(score_rf, 3))

soit score_svm = ml.evaluer_modele(svm_model, X_train, y_train, "accuracy")
imprimer("PrÃ©cision SVM:", arrondir(score_svm, 3))

soit score_knn = ml.evaluer_modele(knn_model, X_train, y_train, "accuracy")
imprimer("PrÃ©cision KNN:", arrondir(score_knn, 3))
imprimer()

# Test 6: Preprocessing
imprimer("âš™ï¸  Test 6: Preprocessing des donnÃ©es")
soit X_std = ml.standardiser_donnees(X_train)
imprimer("âœ… DonnÃ©es standardisÃ©es (premiÃ¨res lignes):")
imprimer("  ", X_std[0])
imprimer("  ", X_std[1])

soit X_norm = ml.normaliser_donnees(X_train)
imprimer("âœ… DonnÃ©es normalisÃ©es (premiÃ¨res lignes):")
imprimer("  ", X_norm[0])
imprimer("  ", X_norm[1])
imprimer()

# Test 7: Clustering
imprimer("ğŸ¯ Test 7: Clustering non supervisÃ©")
soit kmeans_model = ml.KMeans(2, 100)
soit resultat_kmeans = ml.entrainer(kmeans_model, X_train, [0, 0, 0, 0, 0, 0, 0, 0])
imprimer("K-Means entraÃ®nÃ©:", resultat_kmeans)

soit clusters = ml.predire(kmeans_model, X_train)
imprimer("Clusters assignÃ©s:", clusters)
imprimer()

imprimer("ğŸ‰ === TESTS ML TERMINÃ‰S AVEC SUCCÃˆS ===")
imprimer("âœ¨ F-IA Phase 3 - Machine Learning natif opÃ©rationnel !")
